(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t,a){},149:function(e,t,a){},182:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(46),r=a.n(s),i=(a(148),a(6)),o=(a.p,a(149),a(246)),l=a(29),j=a(14),d=a.n(j),u=a(237),h=a(83),b=a(230),O=a(248),p=a(249),x=a(0),g=function(e){var t=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)({firstName:{message:""},lastName:{message:""},email:{message:""},password:{message:""},confirmPassword:{message:""}}),o=Object(i.a)(r,2),j=o[0],g=o[1],f=function(e){var t=Object(l.a)({},c);t[e.target.id]=e.target.value,s(t);var a={};a[e.target.id]={message:""};var n=Object(l.a)(Object(l.a)({},j),a);g(n),console.log(j)};return Object(x.jsxs)(u.a,{container:!0,spacing:2,children:[Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(h.a,{variant:"h3",children:"Register"})}),Object(x.jsx)(u.a,{item:!0,xs:6,children:Object(x.jsx)(b.a,{id:"firstName",label:"First Name",value:c.firstName,onChange:f,fullWidth:!0,variant:"filled",error:""!==j.firstName.message,helperText:j.firstName.message})}),Object(x.jsx)(u.a,{item:!0,xs:6,children:Object(x.jsx)(b.a,{id:"lastName",label:"Last Name",value:c.lastName,onChange:f,fullWidth:!0,variant:"filled",error:""!==j.lastName.message,helperText:j.lastName.message})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{id:"email",label:"Email",value:c.email,onChange:f,fullWidth:!0,variant:"filled",error:""!==j.email.message,helperText:j.email.message})}),Object(x.jsx)(u.a,{item:!0,xs:6,children:Object(x.jsx)(b.a,{id:"password",label:"Password",value:c.password,onChange:f,type:"password",fullWidth:!0,variant:"filled",error:""!==j.password.message,helperText:j.password.message})}),Object(x.jsx)(u.a,{item:!0,xs:6,children:Object(x.jsx)(b.a,{id:"confirmPassword",label:"Confirm Password",value:c.confirmPassword,onChange:f,type:"password",fullWidth:!0,variant:"filled",error:""!==j.confirmPassword.message||""!==j.password.message,helperText:j.confirmPassword.message})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(O.a,{onClick:function(t){t.preventDefault(),e.setIsReg(!1)},style:{cursor:"pointer"},children:"Have an account?"})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(p.a,{onClick:function(t){return function(t){t.preventDefault(),d.a.post("http://localhost:5000/api/user/register",c).then((function(t){e.setIsReg(!1),console.log(t)})).catch((function(e){console.log(e.response.data.error.errors);var t=Object(l.a)(Object(l.a)({},j),e.response.data.error.errors);g(t)}))}(t)},variant:"contained",children:"Sign Up"})})]})},f=a(18),m=a(17),v=function(e){var t=Object(n.useContext)(Se),a=(t.state,t.dispatch),c=Object(f.g)(),s=Object(n.useState)({email:"",password:""}),r=Object(i.a)(s,2),o=r[0],j=r[1],g=Object(n.useState)(""),v=Object(i.a)(g,2),S=v[0],y=v[1],w=function(e){var t=Object(l.a)({},o);t[e.target.id]=e.target.value,j(t),y("")};return Object(x.jsxs)(u.a,{container:!0,spacing:2,children:[Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(h.a,{variant:"h3",children:"Login"})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{id:"email",label:"Email",value:o.email,onChange:w,type:"email",fullWidth:!0,variant:"filled",error:""!==S})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{id:"password",label:"Password",value:o.password,onChange:w,type:"password",fullWidth:!0,variant:"filled",error:""!==S,helperText:""!==S?S:""})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(O.a,{onClick:function(t){t.preventDefault(),e.setIsReg(!0)},style:{cursor:"pointer"},children:"Need an account?"})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(p.a,{onClick:function(e){return function(e){e.preventDefault(),d.a.post("http://localhost:5000/api/user/login",o).then((function(e){m.ReactSession.set("user",JSON.stringify(e.data)),a({type:"USER",payload:e.data}),console.log(e.data),c.push("/welcome")})).catch((function(e){y(e.response.data),console.log(e.response.data)}))}(e)},variant:"contained",children:"Login"})})]})},S=a(250),y=a(251),w=function(e){var t=Object(n.useState)((new Date).toLocaleDateString("en-US")),a=Object(i.a)(t,2),c=a[0],s=(a[1],Object(f.g)()),r=Object(f.h)().orgId,o=function(e){e.preventDefault(),m.ReactSession.remove("user"),d.a.get("http://localhost:5000/api/user/logout").then(s.push("/logreg")).catch((function(e){return console.log(e)}))};switch(e.page){case"LoginReg":return Object(x.jsx)(S.a,{position:"static",children:Object(x.jsx)(y.a,{children:Object(x.jsx)(h.a,{variant:"h4",children:"Instawork"})})});case"Supervisor":return Object(x.jsx)(S.a,{position:"static",children:Object(x.jsxs)(y.a,{children:[Object(x.jsx)(h.a,{variant:"h4",children:"Instawork"}),Object(x.jsx)(O.a,{variant:"h6",onClick:function(e){e.preventDefault(),s.push("/welcome")},style:{marginLeft:"auto",marginRight:"20px",cursor:"pointer"},color:"inherit",children:e.orgName}),Object(x.jsx)(h.a,{variant:"h6",style:{marginRight:"20px"},children:c}),Object(x.jsx)(h.a,{variant:"h6",style:{marginRight:"auto"},children:e.deptName}),e.isAdmin?Object(x.jsx)(O.a,{variant:"h6",onClick:function(t){t.preventDefault(),s.push("/dashboard/admin/".concat(e.orgId))},style:{marginRight:"20px",cursor:"pointer"},color:"inherit",children:"Admin"}):"",Object(x.jsx)(O.a,{style:{cursor:"pointer"},variant:"h6",onClick:o,color:"inherit",children:"Logout"})]})});case"Admin":return Object(x.jsx)(S.a,{position:"static",children:Object(x.jsxs)(y.a,{children:[Object(x.jsx)(h.a,{variant:"h4",style:{marginRight:"170px"},children:"Instawork"}),Object(x.jsx)(h.a,{variant:"h6",marginX:"auto",children:"Admin"}),Object(x.jsx)(O.a,{style:{cursor:"pointer",marginLeft:"auto"},variant:"h6",onClick:function(e){e.preventDefault(),s.push("/dashboard/".concat(r))},color:"inherit",children:"Go Back"}),Object(x.jsx)(O.a,{style:{cursor:"pointer",marginLeft:"20px"},variant:"h6",onClick:o,color:"inherit",children:"Logout"})]})});default:return Object(x.jsx)(x.Fragment,{})}},C=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(w,{page:"LoginReg"}),Object(x.jsx)(o.a,{sx:{flexGrow:1,width:"50ch",marginX:"auto",marginTop:"20ch",padding:"30px"},elevation:3,children:a?Object(x.jsx)(g,{setIsReg:c}):Object(x.jsx)(v,{setIsReg:c})})]})},I=a(97),R=a(236),N=a(16),k=a(58),D=a.n(k),z=a(76),A=a(223),E=a(224),P=a(241),L=a(240);function U(e){var t,a=0;for(t=0;t<e.length;t+=1)a=e.charCodeAt(t)+((a<<5)-a);var n="#";for(t=0;t<3;t+=1){n+="00".concat((a>>8*t&255).toString(16)).substr(-2)}return n}function _(e){return Object(x.jsx)(L.a,Object(l.a)({style:{height:"35px",width:"35px"}},{sx:{bgcolor:U(t=e.name)},children:"".concat(t.split(" ")[0][0]).concat(t.split(" ")[1][0])}));var t}var W=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),l=Object(i.a)(r,2),j=l[0],u=l[1],h=Object(f.h)().deptId,O=Object(n.useState)(!0),p=Object(i.a)(O,2),g=(p[0],p[1],Object(n.useState)([])),m=Object(i.a)(g,2),v=m[0],S=m[1],y=(e.showOne,e.setShowOne),w=function(){var e=Object(z.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t.target.value),t.target.value=j;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d.a.post("http://localhost:5000/api/post/department",{deptId:h}).then((function(e){for(var t=[].concat(Object(N.a)(e.data.managers),Object(N.a)(e.data.employees)),a=[],n=0;n<t.length;n++){for(var c=!1,r=0;r<a.length;r++)if(t[n]._id===a[r]._id){c=!0;break}c||a.push(t[n])}s(a),""===j&&S(a)})).catch((function(e){return console.log(e.response)}));var e=[];return c.forEach((function(t){(t.firstName+" "+t.lastName).toLowerCase().includes(j.toLowerCase())&&e.push(t)})),S(e),function(){!1}}),[j,h]),Object(x.jsx)(A.a,{component:o.a,padding:2,style:{minHeight:"85vh"},children:Object(x.jsxs)(E.a,{spacing:2,children:[Object(x.jsx)(b.a,{id:"search",variant:"outlined",label:"Search Employees",value:j,onChange:w}),v.map((function(e){return Object(x.jsx)(P.a,{avatar:Object(x.jsx)(_,{name:e.firstName+" "+e.lastName}),label:e.firstName+" "+e.lastName,variant:"outline",style:{height:"50px",fontSize:"20px",justifyContent:"start",paddingLeft:"10px"},clickable:!0,component:"a",href:"#",onClick:function(t){return function(e,t){e.preventDefault(),y(t)}(t,e._id)}})}))]})})},T=a(3),F=a(255),B=a(257),M=a(256),J=a(242),H=a(254),G=a(253),X=a(252),Y=function(e){var t=n.useState(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],r=e.id,o=e.count,l=e.setCount,j=Object(n.useState)(""),u=Object(i.a)(j,2),h=(u[0],u[1]),O=Object(n.useState)(""),g=Object(i.a)(O,2),v=g[0],S=g[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),C=(w[0],w[1]),I=JSON.parse(m.ReactSession.get("user")),R=Object(f.g)(),N=Object(n.useContext)(Se),k=(N.state,N.dispatch),D=function(){s(!1)};Object(n.useEffect)((function(){I?k({type:"USER",payload:I}):R.push("/logReg"),s&&d.a.post("http://localhost:5000/api/post/postid",{id:r}).then((function(e){h(e.data.post.postText),S(e.data.post.workResult),C(e.data.post.reviewMessage)})).catch((function(e){return console.error(e)}))}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(p.a,{variant:"outlined",size:"small",onClick:function(){s(!0)},children:"Add Result"}),Object(x.jsxs)(J.a,{open:c,onClose:D,children:[Object(x.jsx)(X.a,{children:"Add Result"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.a.put("http://localhost:5000/api/post/updateById",{postId:r,workResult:v}).then((function(e){l(o+1),s(!1)})).catch((function(e){return console.error(e)}))},children:[Object(x.jsxs)(G.a,{children:[Object(x.jsx)(b.a,{autoFocus:!0,margin:"dense",name:"workResult",id:"workResult",label:"Work Result: ",type:"text",onChange:function(e){return function(e){S(e.target.value)}(e)},value:v,fullWidth:!0,variant:"standard"}),Object(x.jsx)(p.a,{onClick:D,children:"Cancel"}),Object(x.jsx)(p.a,{type:"submit",children:"Add to Post"})]}),Object(x.jsx)(H.a,{})]})]})]})},V=function(e){var t=n.useState(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(n.useContext)(Se),o=(r.state,r.dispatch),l=Object(f.h)(),j=(l.orgId,l.deptId),u=Object(n.useState)(""),h=Object(i.a)(u,2),O=h[0],g=h[1],v=Object(n.useState)(""),S=Object(i.a)(v,2),y=(S[0],S[1],Object(n.useState)("")),w=Object(i.a)(y,2),C=(w[0],w[1],Object(f.g)()),I=e.count,R=e.setCount,k=e.posts,D=e.setPosts,z=JSON.parse(m.ReactSession.get("user")),A=function(){s(!1)};Object(n.useEffect)((function(){z?o({type:"USER",payload:z}):C.push("/logReg")}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(p.a,{variant:"contained",onClick:function(){s(!0)},children:"Add Plan"}),Object(x.jsxs)(J.a,{open:c,onClose:A,children:[Object(x.jsx)(X.a,{children:"Add Plan"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.a.put("http://localhost:5000/api/department/post/add",{newPost:{postText:O,userId:z.userId},deptId:j}).then((function(e){console.log(e.data),D([].concat(Object(N.a)(k),[e.data])),s(!1)})).then((function(e){R(I+1)})).catch((function(e){return console.error(e)}))},children:[Object(x.jsxs)(G.a,{children:[Object(x.jsx)(b.a,{autoFocus:!0,margin:"dense",name:"postText",id:"postText",label:"Work Plan: ",type:"text",onChange:function(e){return function(e){g(e.target.value)}(e)},value:O,fullWidth:!0,variant:"standard",multiline:!0}),Object(x.jsx)(p.a,{onClick:A,children:"Cancel"}),Object(x.jsx)(p.a,{type:"submit",children:"Add to Post"})]}),Object(x.jsx)(H.a,{})]})]})]})},q=function(e){var t=n.useState(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],r=e.id,o=e.count,l=e.setCount,j=Object(n.useContext)(Se),u=(j.state,j.dispatch),h=Object(n.useState)(""),O=Object(i.a)(h,2),g=(O[0],O[1]),v=Object(n.useState)(""),S=Object(i.a)(v,2),y=(S[0],S[1]),w=Object(n.useState)(""),C=Object(i.a)(w,2),I=C[0],R=C[1],N=JSON.parse(m.ReactSession.get("user")),k=Object(f.g)(),D=function(){s(!1)};Object(n.useEffect)((function(){N?u({type:"USER",payload:N}):k.push("/logReg"),s&&d.a.post("http://localhost:5000/api/post/postid",{id:r}).then((function(e){g(e.data.post.postText),y(e.data.post.workResult),R(e.data.post.reviewMessage)})).catch((function(e){return console.error(e)}))}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(p.a,{size:"small",onClick:function(){s(!0)},children:"Review"}),Object(x.jsxs)(J.a,{open:c,onClose:D,children:[Object(x.jsx)(X.a,{children:"Add Review"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.a.put("http://localhost:5000/api/post/updateById",{postId:r,reviewMessage:I}).then((function(e){l(o+1),s(!1)})).catch((function(e){return console.error(e)}))},children:[Object(x.jsxs)(G.a,{children:[Object(x.jsx)(b.a,{autoFocus:!0,margin:"dense",name:"reviewMessage",id:"reviewMessage",label:"Review Message: ",type:"text",onChange:function(e){return function(e){R(e.target.value)}(e)},value:I,fullWidth:!0,variant:"standard"}),Object(x.jsx)(p.a,{onClick:D,children:"Cancel"}),Object(x.jsx)(p.a,{type:"submit",children:"Add to Post"})]}),Object(x.jsx)(H.a,{})]})]})]})},K=(A.a,function(e){var t=Object(n.useContext)(Se),a=(t.state,t.dispatch),c=Object(f.h)(),s=(c.orgId,c.deptId),r=Object(n.useState)([]),o=Object(i.a)(r,2),l=o[0],j=o[1],b=Object(n.useState)([]),O=Object(i.a)(b,2),g=(O[0],O[1]),v=Object(n.useState)([]),S=Object(i.a)(v,2),y=S[0],w=S[1],C=Object(n.useState)(!1),I=Object(i.a)(C,2),R=(I[0],I[1],JSON.parse(m.ReactSession.get("user"))),N=Object(f.g)(),k=e.count,D=e.setCount,z=Object(n.useState)((new Date).toLocaleDateString("en-US")),A=Object(i.a)(z,2),E=(A[0],A[1],e.showOne),P=e.setShowOne;Object(n.useEffect)((function(){R?a({type:"USER",payload:R}):N.push("/logReg"),d.a.post("http://localhost:5000/api/post/department",{deptId:s}).then((function(e){var t=e.data.posts.filter((function(e){return new Date(e.createdAt).getDate()==(new Date).getDate()}));j(t),g(e.data.employees),w(e.data.managers),console.log(e.data)})).catch((function(e){return console.error(e)}))}),[k]);return 0!=l.length||s?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between"},children:[Object(x.jsx)(V,{count:k,setCount:D,posts:l,setPosts:j}),""===E?Object(x.jsx)(x.Fragment,{}):Object(x.jsx)(p.a,{onClick:function(){P("")},variant:"outlined",children:"Show All"})]}),l.map((function(e,t){var a,n;return""!==E&&e.userId._id===E?Object(x.jsx)("div",{children:Object(x.jsxs)(F.a,(a={sx:{minWidth:275}},Object(T.a)(a,"sx",{my:2}),Object(T.a)(a,"children",[Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(u.a,{container:!0,justifyContent:"space-between",children:[Object(x.jsx)(u.a,{item:!0,sx:6,children:Object(x.jsxs)(h.a,{variant:"h5",children:[e.userId.firstName," ",e.userId.lastName]})}),Object(x.jsxs)(u.a,{item:!0,sx:"auto",alignItems:"center",children:[Object(x.jsx)(u.a,{item:!0,xs:"auto",children:Object(x.jsx)(h.a,{variant:"body2",sx:{fontSize:14},children:new Date(e.createdAt).toLocaleTimeString("en-US")})}),Object(x.jsx)(u.a,{item:!0,xs:"auto",children:Object(x.jsx)(h.a,{variant:"body2",sx:{fontSize:14},children:new Date(e.createdAt).toLocaleDateString("en-US")})})]})]}),Object(x.jsx)(h.a,{variant:"body2",children:"Work Plan:"}),Object(x.jsx)("div",{style:{display:"flex",flexWrap:"wrap",maxWidth:"40vw"},children:Object(x.jsx)(h.a,{variant:"body1",sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.postText})}),Object(x.jsx)(h.a,{variant:"body2",children:"Work Result:"}),null==e.workResult&&R.userId==e.userId._id?Object(x.jsx)(Y,{id:e._id,count:k,setCount:D}):Object(x.jsx)("div",{children:Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.workResult})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)(B.a,{children:[null==e.reviewMessage&&R.userId!=e.userId._id&&y.some((function(e){return e._id==R.userId}))&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(q,{id:e._id,count:k,setCount:D}),Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.reviewMessage})]}),R.userId==e.userId._id||y.some((function(e){return e._id==R.userId}))?Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.reviewMessage}):""]})]),a))},t):""===E?Object(x.jsx)("div",{children:Object(x.jsxs)(F.a,(n={sx:{minWidth:275}},Object(T.a)(n,"sx",{my:2}),Object(T.a)(n,"children",[Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(u.a,{container:!0,justifyContent:"space-between",children:[Object(x.jsx)(u.a,{item:!0,sx:6,children:Object(x.jsxs)(h.a,{variant:"h5",children:[e.userId.firstName," ",e.userId.lastName]})}),Object(x.jsxs)(u.a,{item:!0,sx:"auto",alignItems:"center",children:[Object(x.jsx)(u.a,{item:!0,xs:"auto",children:Object(x.jsx)(h.a,{variant:"body2",sx:{fontSize:14},children:new Date(e.createdAt).toLocaleTimeString("en-US")})}),Object(x.jsx)(u.a,{item:!0,xs:"auto",children:Object(x.jsx)(h.a,{variant:"body2",sx:{fontSize:14},children:new Date(e.createdAt).toLocaleDateString("en-US")})})]})]}),Object(x.jsx)(h.a,{variant:"body2",children:"Work Plan:"}),Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.postText}),Object(x.jsx)(h.a,{variant:"body2",children:"Work Result:"}),null==e.workResult&&R.userId==e.userId._id?Object(x.jsx)(Y,{id:e._id,count:k,setCount:D}):Object(x.jsx)("div",{children:Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.workResult})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)(B.a,{children:[null==e.reviewMessage&&R.userId!=e.userId._id&&y.some((function(e){return e._id==R.userId}))&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(q,{id:e._id,count:k,setCount:D}),Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.reviewMessage})]}),R.userId==e.userId._id||y.some((function(e){return e._id==R.userId}))?Object(x.jsx)(h.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e.reviewMessage}):""]})]),n))},t):void 0}))]}):Object(x.jsx)("p",{children:"Please a department to show work plans."})}),Q=function(e){var t=Object(n.useContext)(Se),a=(t.state,t.dispatch),c=Object(f.h)().orgId,s=Object(n.useState)([]),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(f.g)(),u=JSON.parse(m.ReactSession.get("user"));return Object(n.useEffect)((function(){u?a({type:"USER",payload:u}):j.push("/logReg"),d.a.get("http://localhost:5000/api/organization/depts/"+c).then((function(e){l(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(x.jsx)("div",{children:Object(x.jsx)("ul",{children:o.map((function(t,a){return Object(x.jsx)("il",{children:Object(x.jsx)("p",{children:Object(x.jsx)(O.a,{onClick:function(a){return function(t,a,n){t.preventDefault(),j.push("/dashboard/".concat(a,"/").concat(n)),e.setCount(e.count+1)}(a,c,t._id)},style:{cursor:"pointer"},children:t.name})})},a)}))})})},Z=function(){var e=Object(n.useContext)(Se),t=(e.state,e.dispatch),a=Object(f.g)(),c=Object(n.useState)(0),s=Object(i.a)(c,2),r=s[0],o=s[1],l=JSON.parse(m.ReactSession.get("user")),j=Object(f.h)(),h=j.orgId,b=j.deptId,O=Object(n.useState)(""),p=Object(i.a)(O,2),g=p[0],v=p[1],S=Object(n.useState)(""),y=Object(i.a)(S,2),C=y[0],I=y[1],R=Object(n.useState)(!1),N=Object(i.a)(R,2),k=N[0],D=N[1],z=Object(n.useState)({emp:[],man:[]}),A=Object(i.a)(z,2),E=A[0],P=A[1],L=Object(n.useState)(""),U=Object(i.a)(L,2),_=U[0],T=U[1];return Object(n.useEffect)((function(){l?(t({type:"USER",payload:l}),d.a.get("http://localhost:5000/api/organization/".concat(h)).then((function(e){e.data.admins.includes(l.userId)&&D(!0),v(e.data.name)})).catch((function(e){return console.log(e.response)})),d.a.get("http://localhost:5000/api/department/".concat(b)).then((function(e){return I(e.data.name)})).catch((function(e){return console.log(e.response)}))):a.push("/logReg")}),[r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(w,{page:"Supervisor",orgName:g,deptName:C,isAdmin:k,orgId:h}),Object(x.jsxs)(u.a,{container:!0,padding:2,spacing:4,children:[Object(x.jsx)(u.a,{item:!0,xs:3,children:Object(x.jsx)(W,{empList:E,setEmpList:P,showOne:_,setShowOne:T})}),Object(x.jsx)(u.a,{item:!0,xs:6,children:Object(x.jsx)(K,{count:r,setCount:o,empList:E,setEmpList:P,showOne:_,setShowOne:T})}),Object(x.jsx)(u.a,{item:!0,xs:3,children:Object(x.jsx)(Q,{count:r,setCount:o})})]})]})},$=a(247),ee=a(234),te=a(227),ae=a(225),ne=a(226),ce=function(e){var t=Object(n.useContext)(Se),a=t.state,c=t.dispatch,s=Object(f.g)(),r=Object(n.useState)([]),l=Object(i.a)(r,2),j=l[0],b=l[1];Object(n.useEffect)((function(){var e=JSON.parse(m.ReactSession.get("user"));e?c({type:"USER",payload:e}):s.push("/logReg"),d.a.post("http://localhost:5000/api/user/",{userId:e.userId}).then((function(e){for(var t=[],a=0;a<e.data.organizations.length;a++){for(var n=!1,c=0;c<t.length;c++)if(e.data.organizations[a].orgId._id===t[c].orgId._id){n=!0;break}n||(console.log(e.data.organizations[a]),t.push(e.data.organizations[a]))}b(t)})).catch((function(e){return console.log(e)}))}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(o.a,{style:{margin:"20px auto",width:"80vw",padding:"20px",height:"70vh",minHeight:"500px"},elevation:3,children:[Object(x.jsxs)(h.a,{style:{textAlign:"center",marginTop:"20px"},variant:"h3",children:["Welcome ",a.firstName]}),0==j.length?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("p",{style:{textAlign:"center"},children:"You don't have any organization. Please create or apply to one."})}):Object(x.jsxs)(u.a,{children:[Object(x.jsx)($.a,{children:Object(x.jsx)(ee.a,{disablePadding:!0,children:Object(x.jsx)(ae.a,{primary:"Here is the list of your organizations:"})})}),Object(x.jsx)(ne.a,{}),Object(x.jsx)($.a,{style:{overflow:"auto",maxHeight:"50vh",height:"40vh",marginBottom:"auto"},children:j.map((function(e){return Object(x.jsx)(ee.a,{disablePadding:!0,children:Object(x.jsx)(te.a,{children:Object(x.jsx)(O.a,{onClick:function(t){return function(e,t){e.preventDefault(),s.push("/dashboard/".concat(t))}(t,e.orgId._id)},style:{textDecoration:"none",fontSize:"35px"},color:"inherit",children:e.orgId.name})})},e.orgId)}))})]}),Object(x.jsxs)(u.a,{sx:{display:"flex",justifyContent:"space-around"},children:[Object(x.jsx)(p.a,{variant:"contained",children:Object(x.jsx)(O.a,{style:{cursor:"pointer",marginLeft:"auto",textDecoration:"none"},variant:"h6",onClick:function(e){e.preventDefault(),s.push("/organization/create")},color:"inherit",children:"Create Organization"})}),Object(x.jsx)(p.a,{variant:"outlined",children:Object(x.jsx)(O.a,{style:{cursor:"pointer",marginLeft:"auto",textDecoration:"none"},variant:"h6",onClick:function(e){e.preventDefault(),s.push("/organization/apply")},color:"inherit",children:"Apply to an Organization"})})]})]})})},se=a(21),re=function(){var e=Object(n.useContext)(Se),t=(e.state,e.dispatch),a=Object(f.g)(),c=Object(n.useState)(""),s=Object(i.a)(c,2),r=s[0],l=s[1],j=Object(n.useState)(""),O=Object(i.a)(j,2),g=O[0],v=O[1],S=JSON.parse(m.ReactSession.get("user")),y=Object(n.useState)({orgName:{message:""},orgDescription:{message:""}}),w=Object(i.a)(y,2);w[0],w[1];Object(n.useEffect)((function(){console.log("this is from session!"+S.userId),S?t({type:"USER",payload:S}):a.push("/logReg")}),[]);return Object(x.jsx)("div",{children:Object(x.jsx)(o.a,{sx:{flexGrow:1,width:"50ch",marginX:"auto",marginTop:"5ch",padding:"30px"},elevation:3,children:Object(x.jsx)("form",{container:!0,spacing:2,children:Object(x.jsxs)(u.a,{container:!0,spacing:2,children:[Object(x.jsx)(u.a,{item:!0,xs:12,pb:2,children:Object(x.jsx)(h.a,{variant:"h3",children:"Create Organization"})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{id:"orgName",label:"Organization Name: ",value:r,onChange:function(e){e.preventDefault(),l(e.target.value)},type:"text",fullWidth:!0,variant:"filled"})}),Object(x.jsx)(u.a,{item:!0,xs:12,pb:2,children:Object(x.jsx)(b.a,{id:"orgDescription",label:"Description",value:g,onChange:function(e){e.preventDefault(),v(e.target.value)},type:"text",fullWidth:!0,variant:"filled"})}),Object(x.jsxs)(u.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(p.a,{variant:"outlined",children:Object(x.jsx)(se.b,{to:"/welcome",style:{cursor:"pointer",textDecoration:"none",color:"secondary"},children:"Welcome Page"})}),Object(x.jsx)(p.a,{onClick:function(e){d.a.post("http://localhost:5000/api/organization/create",{newOrg:{name:r,description:g},userId:S.userId}).then((function(e){console.log(e),d.a.post("http://localhost:5000/api/user",{userId:S.userId}).then((function(e){t({type:"USER",payload:e.data}),a.push("/welcome")})).catch((function(e){console.log(e.res)}))})).catch((function(e){console.log(e.res)}))},variant:"contained",children:"Create"})]})]})})})})},ie=function(){var e=Object(n.useContext)(Se),t=(e.state,e.dispatch),a=Object(f.g)(),c=Object(n.useState)(""),s=Object(i.a)(c,2),r=s[0],l=s[1],j=Object(n.useState)(""),d=Object(i.a)(j,2),O=d[0],g=d[1],v=JSON.parse(m.ReactSession.get("user"));Object(n.useEffect)((function(){console.log("this is from session!"+v.userId),v?t({type:"USER",payload:v}):a.push("/logReg")}),[]);return Object(x.jsx)("div",{children:Object(x.jsx)(o.a,{sx:{flexGrow:1,width:"50ch",marginX:"auto",marginTop:"5ch",padding:"30px"},elevation:3,children:Object(x.jsx)("form",{container:!0,spacing:2,children:Object(x.jsxs)(u.a,{container:!0,spacing:2,children:[Object(x.jsx)(u.a,{item:!0,xs:12,pb:2,children:Object(x.jsx)(h.a,{variant:"h3",children:"Apply to An Organization"})}),Object(x.jsx)(u.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{id:"orgId",label:"Id",value:r,onChange:function(e){e.preventDefault(),l(e.target.value)},type:"text",fullWidth:!0,variant:"filled"})}),Object(x.jsx)(u.a,{item:!0,xs:12,pb:2,children:Object(x.jsx)(b.a,{id:"orgName",label:"Organization Name: ",value:O,onChange:function(e){e.preventDefault(),g(e.target.value)},type:"text",fullWidth:!0,variant:"filled"})}),Object(x.jsxs)(u.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(p.a,{variant:"outlined",children:Object(x.jsx)(se.b,{to:"/welcome",style:{cursor:"pointer",textDecoration:"none"},color:"inherit",children:"Welcome Page"})}),Object(x.jsx)(p.a,{onClick:function(e){a.push("/welcome")},variant:"contained",children:"Apply"})]})]})})})})},oe={IamACoolPlaceHolderhahahhahaha:"",organizations:[]},le=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:"UPDATE"===t.type?Object(l.a)(Object(l.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEPIC"===t.type?Object(l.a)(Object(l.a)({},e),{},{pic:t.payload}):e},je=a(229),de=a(243),ue=a(233),he=a(232),be=a(228),Oe=a(28),pe=a(258),xe=a(259),ge=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(f.h)().orgId;return Object(x.jsxs)(o.a,{component:"form",sx:{marginTop:"20px"},children:[Object(x.jsx)(Oe.c,{sx:{ml:1,flex:1},placeholder:"Add Department",inputProps:{"aria-label":"add department"},value:c,onChange:function(e){s(e.target.value)}}),Object(x.jsx)(pe.a,{onClick:function(t){var a={orgId:r,newDept:{name:c,orgId:r},userId:JSON.parse(m.ReactSession.get("user")).userId,privilege:3};d.a.post("http://localhost:5000/api/department/create",a).then((function(t){console.log(t),e.setAllDepts([].concat(Object(N.a)(e.allDepts),[t])),e.setCount(e.count+1)})).catch((function(e){return console.log(e.response)})),s("")},children:Object(x.jsx)(xe.a,{children:"add_circle"})})]})},fe=function(e){var t=Object(n.useState)({userId:"",firstName:"",lastName:""}),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),l=Object(i.a)(r,2),j=l[0],b=l[1],O=Object(n.useState)(1),g=Object(i.a)(O,2),m=g[0],v=g[1],S=Object(n.useState)(!1),y=Object(i.a)(S,2),w=y[0],C=y[1],I=Object(n.useState)(!1),R=Object(i.a)(I,2),N=R[0],k=R[1],D=Object(n.useState)([]),z=Object(i.a)(D,2),A=z[0],E=z[1],P=Object(f.h)().orgId,L=function(e){C(!1),k(!1)};return Object(n.useEffect)((function(){d.a.get("http://localhost:5000/api/organization/depts/"+P).then((function(e){return E(e.data)})).catch((function(e){return console.log(e.response)})),console.log(e.selectedUserId),d.a.post("http://localhost:5000/api/user/",{userId:e.selectedUserId}).then((function(e){s(e.data)})).catch((function(e){return console.log(e.response)}))}),[e.selectedUserId,e.count]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(be.a,{component:o.a,padding:2,children:Object(x.jsxs)(u.a,{container:!0,spacing:2,columnSpacing:2,alignContent:"center",children:[Object(x.jsxs)(u.a,{item:!0,xs:12,children:[c.firstName&&c.lastName?Object(x.jsxs)(h.a,{variant:"h3",textAlign:"center",sx:{marginBottom:"20px"},children:[c.firstName," ",c.lastName]}):Object(x.jsx)("p",{}),Object(x.jsx)(ne.a,{sx:{marginBottom:"20px"}})]}),Object(x.jsxs)(u.a,{container:!0,item:!0,xs:12,spacing:2,justifyContent:"center",marginY:"20px",children:[Object(x.jsx)(u.a,{item:!0,xs:4,children:Object(x.jsx)(h.a,{variant:"h4",children:"Privilege"})}),Object(x.jsx)(u.a,{item:!0,xs:"auto",children:Object(x.jsxs)(je.a,{value:m,onChange:function(e){v(e.target.value)},id:"privilege",sx:{width:"250px"},children:[Object(x.jsx)(de.a,{value:1,defaultValue:!0,children:"Member"}),Object(x.jsx)(de.a,{value:2,children:"Manager"}),Object(x.jsx)(de.a,{value:3,children:"Admin"})]})})]}),Object(x.jsxs)(u.a,{container:!0,item:!0,xs:12,spacing:2,justifyContent:"center",marginY:"20px",children:[Object(x.jsx)(u.a,{item:!0,xs:4,children:Object(x.jsx)(h.a,{variant:"h4",children:"Department"})}),Object(x.jsxs)(u.a,{item:!0,xs:"auto",children:[Object(x.jsx)(je.a,{value:j,onChange:function(e){b(e.target.value)},id:"department",sx:{width:"250px"},children:A.map((function(e,t){return 0===t?Object(x.jsx)(de.a,{value:e._id,defaultValue:!0,children:e.name},e._id):Object(x.jsx)(de.a,{value:e._id,children:e.name},e._id)}))}),Object(x.jsx)(ge,{count:e.count,setCount:e.setCount,allDepts:A,setAllDepts:E})]})]}),Object(x.jsx)(u.a,{item:!0,xs:12,textAlign:"center",marginY:"20px",children:Object(x.jsx)(p.a,{variant:"contained",size:"large",onClick:function(e){1===m?d.a.put("http://localhost:5000/api/department/employee/add",{deptId:j,userId:c._id,orgId:P,privilege:1}).then((function(e){C(!0)})).catch((function(e){k(!0)})):2===m&&d.a.put("http://localhost:5000/api/department/manager/add",{deptId:j,userId:c._id,orgId:P,privilege:2}).then((function(e){C(!0)})).catch((function(e){k(!0)}))},sx:{minWidth:"250px"},children:"Admit"})})]})}),Object(x.jsx)(ue.a,{open:w,autoHideDuration:4e3,onClose:L,children:Object(x.jsx)(he.a,{onClose:L,severity:"success",sx:{width:"100%"},children:"Added user to department."})}),Object(x.jsx)(ue.a,{open:N,autoHideDuration:4e3,onClose:L,children:Object(x.jsx)(he.a,{onClose:L,severity:"error",sx:{width:"100%"},children:"User already in department."})})]})},me=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)([]),l=Object(i.a)(r,2),j=l[0],u=l[1],h=Object(n.useState)(""),O=Object(i.a)(h,2),p=O[0],g=O[1],m=Object(n.useState)(!0),v=Object(i.a)(m,2),S=v[0],y=v[1],w=Object(f.h)().orgId,C=function(){var e=Object(z.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t.target.value),t.target.value=p;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(S)y(!1),d.a.get("http://localhost:5000/api/user/organization/all/"+w).then((function(e){s(e.data),u(e.data)})).catch((function(e){return console.log(e.response)}));else{var e=[];u(c.forEach((function(t){(t.firstName+" "+t.lastName).toLowerCase().includes(p.toLowerCase())&&e.push(t)}))),u(e)}console.log(c)}),[p]),Object(x.jsx)(A.a,{component:o.a,padding:2,style:{minHeight:"85vh"},children:Object(x.jsxs)(E.a,{spacing:2,children:[Object(x.jsx)(b.a,{id:"search",variant:"outlined",label:"Search Employees",value:p,onChange:C}),j.map((function(t){return Object(x.jsx)(P.a,{avatar:Object(x.jsx)(_,{name:t.firstName+" "+t.lastName}),label:t.firstName+" "+t.lastName,variant:"outline",style:{height:"50px",fontSize:"20px",justifyContent:"start",paddingLeft:"30px"},clickable:!0,component:"a",href:"#",onClick:function(a){return function(t,a){t.preventDefault(),e.setSelectedUserId(a),console.log(a)}(a,t._id)}})}))]})})},ve=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(0),r=Object(i.a)(s,2),o=r[0],l=r[1];return Object(n.useEffect)((function(){""===a&&c(JSON.parse(m.ReactSession.get("user")).userId)}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(w,{page:"Admin"}),Object(x.jsxs)(u.a,{container:!0,spacing:4,padding:2,children:[Object(x.jsx)(u.a,{item:!0,xs:6,sm:4,md:3,children:Object(x.jsx)(me,{selectedUserId:a,setSelectedUserId:c})}),Object(x.jsx)(u.a,{item:!0,xs:6,sm:8,md:9,children:Object(x.jsx)(fe,{selectedUserId:a,setSelectedUserId:c,count:o,setCount:l})})]})]})},Se=Object(n.createContext)();var ye=function(){var e=Object(I.a)({palette:{type:"light",primary:{main:"#303030"},secondary:{main:"#607d8b"},background:{default:"#b0bec5",paper:"#e0e0e0"},error:{main:"#b71c1c"},warning:{main:"#e65100"},info:{main:"#1976d2"},success:{main:"#2e7d32"}},typography:{h6:{fontFamily:"Oswald"},fontFamily:"Roboto",h1:{fontFamily:"Oswald"},button:{fontFamily:"Open Sans"},fontSize:16}});m.ReactSession.setStoreType("sessionStorage");var t=Object(n.useReducer)(le,oe),a=Object(i.a)(t,2),c=a[0],s=a[1];return Object(x.jsx)(Se.Provider,{value:{state:c,dispatch:s},children:Object(x.jsx)(R.a,{theme:e,children:Object(x.jsxs)(f.d,{children:[Object(x.jsx)(f.b,{exact:!0,path:"/",children:Object(x.jsx)(f.a,{to:"/logReg"})}),Object(x.jsx)(f.b,{exact:!0,path:"/logReg",children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(w,{}),Object(x.jsx)(C,{})]})}),Object(x.jsx)(f.b,{exact:!0,path:"/welcome",children:Object(x.jsx)(ce,{})}),Object(x.jsx)(f.b,{exact:!0,path:"/organization/create",children:Object(x.jsx)(re,{})}),Object(x.jsx)(f.b,{exact:!0,path:"/organization/apply",children:Object(x.jsx)(ie,{})}),Object(x.jsx)(f.b,{exact:!0,path:"/dashboard/admin/:orgId",children:Object(x.jsx)(ve,{})}),Object(x.jsx)(f.b,{exact:!0,path:"/organization/create"}),Object(x.jsx)(f.b,{exact:!0,path:"/organization/apply"}),Object(x.jsx)(f.b,{exact:!0,path:"/dashboard/:orgId",children:Object(x.jsx)(Z,{})}),Object(x.jsx)(f.b,{exact:!0,path:"/dashboard/:orgId/:deptId",children:Object(x.jsx)(Z,{})})]})})})},we=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,260)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(se.a,{children:Object(x.jsx)(ye,{})})}),document.getElementById("root")),we()}},[[182,1,2]]]);
//# sourceMappingURL=main.a04247a1.chunk.js.map